시큐리티는 로그인 도메인으로 요청이 들어오면 자동으로 매핑해 세션등록



jwt는 시큐리티 필터에 우리가 직접 필터를 만들고 jwt 토큰을 직접 확인하고 검증
서버로 갈때 요청필터를 먼저 걸고 인증필터

필터 객체를 생성 할때 인자로 아디비번


별별
###토큰 Provider 에 메서드를 짜놓고
인자로 no id roles 받으면 암호화 시켜주면서
그 정보로 토큰만듬

(순서)
jwt 토큰 클라이언트한테 보내줌
여기서 no을 갖고와서 DB에 정보가 있나 확인 
있으면 추가 정보를 넣어줌

토큰에 정보객체, 비번, 권한(목록) 넣음

예외 
1. 토큰만료
2. 지원x
3. 문제있을때
4. 그외

토큰 유효성검사 토큰 매개변수로 받아옴
열어서 헤더 **페이로드 시그니처
exp = 만료기간 추출해 오늘 날짜랑 비교

예외
1. 토큰만료
2. 토큰손상
3. 토큰없음

###필터에서 가져다가 씀 (필터)
인증관리자와 프로바이더 넘겨받음 @ATW 안하는 이유( 꼬이기 싫어서 )

여기서 시큐리티로 pw랑 id확인 
성공하면 

successfulAuthentication에서 토큰발급해 클라이언트한테 보냄


토큰 발급해 클라이언트한테 보내면 헤더에 항상 토큰이 들어가있음 토큰이없으면 이동불가능!
이게 jwt가 할일

af 는 로그인할대만 걸림




